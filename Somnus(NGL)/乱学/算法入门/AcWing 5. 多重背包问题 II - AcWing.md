## [é¢˜ç›®æè¿°ï¼šå¤šé‡èƒŒåŒ…é—®é¢˜II](https://www.acwing.com/problem/content/5/)

æœ‰ Nç§ç‰©å“å’Œä¸€ä¸ªå®¹é‡æ˜¯ V çš„èƒŒç”¨ã€‚

i ç§ç‰©å“æœ€å¤šæœ‰ si ä»¶ï¼Œæ¯ä»¶ä½“ç§¯æ˜¯ viï¼Œä»·å€¼æ˜¯ wiã€‚

æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿è¿™äº›ç‰©å“çš„æ€»ä½“ç§¯ä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”æ€»ä»·å€¼æœ€å¤§ã€‚  
è¾“å‡ºæœ€å¤§ä»·å€¼ã€‚

#### è¾“å…¥æ ¼å¼

ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°ï¼ŒNï¼ŒVï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç‰©å“æ•°é‡å’ŒèƒŒåŒ…å®¹ç§¯ã€‚

æ¥ä¸‹æ¥æœ‰ N è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•° vi, wiï¼Œsi ç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬ i ä»¶ç‰©å“çš„ä½“ç§¯å’Œä»·å€¼å’Œæ•°é‡ã€‚

#### è¾“å‡ºæ ¼å¼

è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§ä»·å€¼ã€‚

#### æ•°æ®èŒƒå›´

0<Nâ‰¤1000  
0<Vâ‰¤2000  
0<vi,wi,siâ‰¤2000

[[AcWing 4 å¤šåŒ… I(ä¸€çœ‹å°±ä¼š,æ‡’äººä¸“ç”¨)+ç²¾ç®€ä»£ç  -]]

#### è¾“å…¥æ ·ä¾‹

```
4 5
1 2 3
2 4 1
3 4 3
4 5 2
```

#### è¾“å‡ºæ ·ä¾‹

```
10
```

## åŸºæœ¬æ€è€ƒæ¡†æ¶

![image.png](https://gitee.com/chzarles/images/raw/master/imgs/006eb5E0gy1g7z0e5ghloj31150fw0ub.jpg)

æ€è·¯å’Œ[å¤šé‡èƒŒåŒ…é—®é¢˜I](https://chzarles.github.io/2019/10/15/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-%E5%A4%9A%E9%87%8D%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98I/)ä¸€æ ·ï¼Œä½†è¿™é¢˜çš„æ•°æ®èŒƒå›´å˜æˆ1000äº†ï¼Œéä¼˜åŒ–å†™æ³•æ—¶é—´å¤æ‚åº¦O(n^3) æ¥è¿‘ 1e9

å¿…è¶…æ—¶ã€‚

## ä¼˜åŒ–å¤šé‡èƒŒåŒ…çš„ä¼˜åŒ–

**é¦–å…ˆ**ï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨å®Œå…¨èƒŒåŒ…çš„ä¼˜åŒ–æ€è·¯æ¥ä¼˜åŒ–è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºæ¯ç»„çš„ç‰©å“çš„ä¸ªæ•°éƒ½ä¸ä¸€æ ·ï¼Œæ˜¯ä¸èƒ½åƒä¹‹å‰ä¸€æ ·æ¨å¯¼ä¸ä¼˜åŒ–é€’æ¨å…³ç³»çš„ã€‚ï¼ˆè¯¦æƒ…çœ‹ä¸‹é¢å¼•ç”¨çš„åšæ–‡ï¼‰

> å¼•ç”¨æˆ‘ä¹‹å‰å†™çš„åšå®¢ï¼šåŠ¨æ€è§„åˆ’-å®Œå…¨èƒŒåŒ…é—®é¢˜
> 
> **æˆ‘ä»¬åˆ—ä¸¾ä¸€ä¸‹æ›´æ–°æ¬¡åºçš„å†…éƒ¨å…³ç³»ï¼š**
> 
> f\[i , j \] = max( f\[i-1,j\] , f\[i-1,j-v\]+w , f\[i-1,j-2_v\]+2_w , f\[i-1,j-3_v\]+3_w , .....)  
> f\[i , j-v\]= max( f\[i-1,j-v\] , f\[i-1,j-2_v\] + w , f\[i-1,j-2_v\]+2\*w , .....)  
> ç”±ä¸Šä¸¤å¼ï¼Œå¯å¾—å‡ºå¦‚ä¸‹é€’æ¨å…³ç³»ï¼š  
> f\[i\]\[j\]=max(f\[i,j-v\]+w , f\[i-1\]\[j\])  

**æ¥ä¸‹æ¥ï¼Œæˆ‘ä»‹ç»ä¸€ä¸ªäºŒè¿›åˆ¶ä¼˜åŒ–çš„æ–¹æ³•**ï¼Œå‡è®¾æœ‰ä¸€ç»„å•†å“ï¼Œä¸€å…±æœ‰11ä¸ªã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåè¿›åˆ¶æ•°å­— **11** å¯ä»¥è¿™æ ·è¡¨ç¤º  

11\=1011(B)\=0111(B)+(11âˆ’0111(B))\=0111(B)+0100(B)

æ­£å¸¸èƒŒåŒ…çš„æ€è·¯ä¸‹ï¼Œæˆ‘ä»¬è¦æ±‚å‡ºå«è¿™ç»„å•†å“çš„æœ€ä¼˜è§£ï¼Œæˆ‘ä»¬è¦æšä¸¾12æ¬¡ï¼ˆæšä¸¾è£…0ï¼Œ1ï¼Œ2....12ä¸ªï¼‰ã€‚

ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æŠŠè¿™11ä¸ªå•†å“åˆ†åˆ«æ‰“åŒ…æˆå«å•†å“ä¸ªæ•°ä¸º1ä¸ªï¼Œ2ä¸ªï¼Œ4ä¸ªï¼Œ4ä¸ªï¼ˆåˆ†åˆ«å¯¹åº”0001,0010,0100,0100ï¼‰çš„å››ä¸ªâ€æ–°çš„å•†å“ â€œ, å°†é—®é¢˜è½¬åŒ–ä¸º01èƒŒåŒ…é—®é¢˜ï¼Œå¯¹äºæ¯ä¸ªå•†å“ï¼Œæˆ‘ä»¬éƒ½åªæšä¸¾ä¸€æ¬¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æšä¸¾å››æ¬¡ ï¼Œå°±å¯ä»¥æ‰¾å‡ºè¿™å«ç»„å•†å“çš„æœ€ä¼˜è§£ã€‚ è¿™æ ·å°±å¤§å¤§å‡å°‘äº†æšä¸¾æ¬¡æ•°ã€‚

è¿™ç§ä¼˜åŒ–å¯¹äºå¤§æ•°å°¤å…¶æ˜æ˜¾ï¼Œä¾‹å¦‚æœ‰1024ä¸ªå•†å“ï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹è¦æšä¸¾1025æ¬¡ ï¼Œ äºŒè¿›åˆ¶æ€æƒ³ä¸‹è½¬åŒ–æˆ01èƒŒåŒ…åªéœ€è¦æšä¸¾10æ¬¡ã€‚

## ä¼˜åŒ–çš„åˆç†æ€§çš„è¯æ˜

**å…ˆè®²ç»“è®ºï¼šä¸Šé¢çš„1ï¼Œ2ï¼Œ4ï¼Œ4æ˜¯å¯ä»¥é€šè¿‡ç»„åˆæ¥è¡¨ç¤ºå‡º0~11ä¸­ä»»ä½•ä¸€ä¸ªæ•°çš„ï¼Œè¿˜æ˜¯æ‹¿11è¯æ˜ä¸€ä¸‹ï¼ˆä¸¾ä¾‹ä¸€ä¸‹ï¼‰ï¼š**

**é¦–å…ˆï¼Œ11å¯ä»¥è¿™æ ·åˆ†æˆä¸¤ä¸ªäºŒè¿›åˆ¶æ•°çš„ç»„åˆï¼š**  

11\=0111(B)+(11âˆ’0111(B))\=0111(B)+0100(B)

**å…¶ä¸­0111é€šè¿‡æšä¸¾è¿™ä¸‰ä¸ª1çš„å–æˆ–ä¸å–ï¼ˆä¹Ÿå°±æ˜¯å¯¹0001(B)ï¼Œ0010(B)ï¼Œ0100(B)çš„ç»„åˆï¼‰ï¼Œå¯ä»¥è¡¨ç¤ºåè¿›åˆ¶æ•°0~7( åˆšå¥½å¯¹åº”äº† 1ï¼Œ2ï¼Œ4 å¯ä»¥ç»„åˆå‡º 0~7 ) , 0~7çš„æšä¸¾å†ç»„åˆä¸Š0100(B)( å³ åè¿›åˆ¶çš„ 4 ) ï¼Œå¯ä»¥è¡¨ç¤ºåè¿›åˆ¶æ•° 0~11ã€‚å…¶å®ƒæƒ…å†µä¹Ÿå¯ä»¥è¿™æ ·è¯æ˜ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œè¿™ä¸ªå®Œå…¨èƒŒåŒ…é—®é¢˜å¯ä»¥ç­‰æ•ˆè½¬åŒ–ä¸º01èƒŒåŒ…é—®é¢˜ï¼Œæœ‰æœ¨æœ‰è§‰å¾—å¾ˆå¥‡å¦™**

## æ€ä¹ˆåˆç†åˆ’åˆ†ä¸€ä¸ªåè¿›åˆ¶æ•°?

ä¸Šé¢æˆ‘æŠŠ11åˆ’åˆ†ä¸º

> 11\=0111(B)+(11âˆ’0111(B))\=0111(B)+0100(B)

æ˜¯å› ä¸º 0111(B)åˆšå¥½æ˜¯å°äº11çš„æœ€å¤§çš„**å°¾éƒ¨å…¨ä¸º1**çš„äºŒè¿›åˆ¶ ( æŒ‰ç…§ä¸Šé¢çš„è¯æ˜ï¼Œè¿™æ ·çš„åˆ’åˆ†æ²¡æ¯›ç—… ) , ç„¶åé‚£ä¸ªå°¾éƒ¨å…¨ä¸º1çš„æ•°åˆå¯ä»¥ åˆ†è§£ä¸º 0000....1 , 0000....10 , 0000....100 ç­‰ç­‰ã€‚

>å³nä»¥å†…çš„ä»»æ„ä¸€ä¸ªæ•° $2^m$ $>=$ n $>=$ $2^p$  $m = p + 1$
>éƒ½å¯ä»¥è¡¨ç¤ºä¸º$\sum$ $2^i$ $\ast$ $k$ , $\{ k = 0 ï¼Œ1  \}$


å¯¹åº”c++ä»£ç ï¼š

```cpp
     //è®¾æœ‰sä¸ªå•†å“ï¼Œä¹Ÿå°±æ˜¯å°†såˆ’åˆ†
    for(int k = 1 ; k <= s ;k*=2)
{
    s-=k;
    goods.push_back({v*k,w*k});
}
if(s>0) 
    goods.push_back({v*s,w*s});
```

æˆ‘å†™å¥½ç†è§£ä¸€ç‚¹ 
- ç°åœ¨èƒ½å¯¹ä½†æ—¶é—´è¶…äº†
```cpp
#include <bits/stdc++.h>
using namespace std;
int v,value,num; 
int N,V;
int divi[12];
int f[2000];  //V<2000
int p;  //äºŒè¿›åˆ¶ä½æ•°
int main(){
	cin>>N>>V;
	for(int i=1;i<=N;i++){
		cin>>v>>value>>num;
		p=0;
		do{
			p++;
			divi[p]=pow(2,p-1);
			if(num<divi[p]){
				divi[p]=num;	
			}
			num-=divi[p];   //äºŒè¿›åˆ¶æ‹†åˆ†
		}while(num>0);
		//æ‹†å®Œäº†å°±æŒ‰ç…§01èƒŒåŒ…è¿›è¡Œåˆ†é…
		for(int l=1;l<=p;l++){
			for(int j=V;j>=v*divi[l];j--)
		        f[j]=max(f[j],f[j-v*divi[l]]+value*divi[l]);
		}
	}
	cout<<f[V]<<endl;
	return 0;
}
```
#### çœ‹æˆ‘æ‰‹æ“ä¸€ä¸ª 
WA?
- æ€ä¹ˆå›äº‹å‘¢ğŸ¤”  -->  ç»“æœæ˜¯`j>=dv[i]å†™é”™äº†å†™æˆj>=0 --> å°‘äº†åˆ¤å®šæ¡ä»¶`
- è¿™ä¸‹åšå¯¹äº†
```cpp
#include <bits/stdc++.h>
using namespace std;
int v,value,num; 
int N,V;
int dv[25000],dvalue[25000];
int f[2000];  //V<2000
int p;  //äºŒè¿›åˆ¶ä½æ•°
int main(){
	cin>>N>>V;
	int k=1;//è®¡ä½(è¡¨ç¤ºäºŒè¿›åˆ¶åˆ’åˆ†åçš„èƒŒåŒ…æœ‰å¤šå°‘â€˜ç§â€™ç‰©å“)
	for(int i=1;i<=N;i++){
		cin>>v>>value>>num;
		for(p=1;p<=num;p<<=1){   //-->"<<"è¡¨ç¤ºæŠŠå­˜å‚¨çš„äºŒè¿›åˆ¶æ•°å·¦ç§»ä¸€æ ¼
			dv[k]=p*v;           //ä¾‹å¦‚0001 --> 0010
			dvalue[k]=p*value;
			k++;
			num-=p;
		}
		if(!num==0){   //å¤„ç†å‰©ä¸‹çš„
			dv[k]=num*v;
			dvalue[k]=num*value;
			k++;
		}
	}
	//æ‹†å®Œäº†ï¼Œç„¶åæ˜¯å¤„ç†äº†
	for(int i=1;i<=k;i++){
		for(int j=V;j>=dv[i];j--){
			f[j]=max(f[j],f[j-dv[i]]+dvalue[i]);	
		}
	}
	cout<<f[V]<<endl;
	return 0;
}
```

ï¼ˆå¤åˆ¶è‡ªacwingï¼‰
```cpp
#include<bits/stdc++.h>
using namespace std;
int main()
{
    int N,V,v[1001],w[1001],dp[2001],s[1001]
    int a[25000],b[25000];  //2çš„12æ¬¡æ–¹å¤§äº2000ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæ•°æœ€å¤šå¯ä»¥æ‹†æˆ12ä¸ªï¼Œæ•…æ•°ç»„å®¹é‡ä¹˜12 
    cin>>N>>V;        
    memset(dp,0,sizeof(dp));
    for(int i=0;i<N;i++)
        cin>>v[i]>>w[i]>>s[i];
    int total=0;  
    for(int i=0;i<N;i++)
    {
        for(int j=1;j<=s[i];j<<=1)//äºŒè¿›åˆ¶æ‹†åˆ† 
         {
            a[total]=j*w[i];//å­˜ä»·å€¼ 
            b[total]=j*v[i];//å­˜å®¹é‡ 
            s[i]-=j;
         }
         if(s[i])//å½“s[i]>0; 
         {
             a[total]=s[i]*w[i];
             b[total++]=s[i]*v[i];
         }
    }
    for(int i=0;i<total;i++)//01èƒŒåŒ… 
     for(int j=V;j>=b[i];j--)
      dp[j]=max(dp[j],dp[j-b[i]]+a[i]);
    cout<<dp[V];
    return 0;
}
```

[é“¾æ¥](https://www.acwing.com/solution/content/1024/)

## ç»ˆç©¶ACä»£ç ï¼š01ä¼˜åŒ–+äºŒè¿›åˆ¶ä¼˜åŒ–

acä»£ç 

```cpp
#include<iostream>
#include<algorithm>
#include<vector>
using namespace std;
const int N = 2010;
int f[N],n,m;
struct good   //ç»“æ„ä½“
{
    int w,v;
};

int main()
{
    cin>>n>>m;
    vector<good> Good;
    good tmp;

    //äºŒè¿›åˆ¶å¤„ç†
    for(int i = 1 ; i <= n ; i++ )
    {
        int v,w,s;
        cin>>v>>w>>s;
        //å‘,k <= s
        for(int k = 1 ; k <= s ; k*=2 )
        {
            s-=k;
            Good.push_back({k*w,k*v});
        }
        if(s>0) Good.push_back({s*w,s*v});
    }

    //01èƒŒåŒ…ä¼˜åŒ–+äºŒè¿›åˆ¶
    for(auto t : Good)
        for(int j = m ; j >= t.v ; j--)
            f[j] = max(f[j] , f[j-t.v]+t.w ); //è¿™é‡Œå°±æ˜¯f[j]


    cout<<f[m]<<endl;
    return 0;

}

ä½œè€…ï¼šCharles__
é“¾æ¥ï¼šhttps://www.acwing.com/solution/content/5527/
æ¥æºï¼šAcWing
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚
```